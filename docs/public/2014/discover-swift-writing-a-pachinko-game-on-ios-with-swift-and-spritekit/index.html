<!DOCTYPE html><html><head><meta charset="utf-8"><title>Discover Swift: Writing a Pachinko game on iOS with Swift and SpriteKit | Decoding Digital Anomalies</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="iOS,Swift"><meta name="description" content="Do you like Swift, the programming language that comes with XCode 6 from Apple? You may not know, but I developed a fondness for it after writing a game with it. I am going to show you how to w"><meta property="og:type" content="article"><meta property="og:title" content="Discover Swift: Writing a Pachinko game on iOS with Swift and SpriteKit"><meta property="og:url" content="http://01man.com/2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit/index.html"><meta property="og:site_name" content="Decoding Digital Anomalies"><meta property="og:description" content="Do you like Swift, the programming language that comes with XCode 6 from Apple? You may not know, but I developed a fondness for it after writing a game with it. I am going to show you how to w"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://01man.com/2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit/screenshot.png"><meta property="article:published_time" content="2014-08-06T17:22:58.000Z"><meta property="article:modified_time" content="2024-04-27T16:12:30.455Z"><meta property="article:author" content="Neo Alienson"><meta property="article:tag" content="iOS"><meta property="article:tag" content="Swift"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://01man.com/2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit/screenshot.png"><link rel="icon" href="/css/neo18-16.png"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/libs/titillium-web/styles.css"><link rel="stylesheet" href="/libs/source-code-pro/styles.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css"><link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css"><script type="text/javascript">!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","53161362","auto"),ga("send","pageview")</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><meta name="generator" content="Hexo 7.2.0"></head><body><div id="wrap"><header id="header"><div id="header-outer" class="outer"><div class="container"><div class="container-inner"><div id="header-title"><h1 class="logo-wrap"><a href="/" class="logo"></a></h1><h2 class="subtitle-wrap"><p class="title">Decoding Digital Anomalies</p><p class="subtitle">Sometimes the feature is the bug in the digital rabbit hole, and vice versa</p></h2></div><div id="header-inner" class="nav-container"><a id="main-nav-toggle" class="nav-icon fa fa-bars"></a><div class="nav-container-inner"><ul id="main-nav"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/">Home</a></li><ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Development/">Development</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Hack/">Hack</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Misc/">Misc</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Tech/">Tech</a></li></ul><li class="main-nav-list-item"><a class="main-nav-list-link" href="/about-me">About</a></li></ul><nav id="sub-nav"><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Search"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>!function(T){T.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}}(window)</script></div></nav></div></div></div></div></div></header><div class="container"><div class="main-body container-inner"><div class="main-body-inner"><section id="main"><div class="main-body-header"><h1 class="header"><a class="page-title-link" href="/categories/Development/">Development</a></h1></div><div class="main-body-content"><article id="post-2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit" class="article article-single article-type-post" itemscope="" itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">Discover Swift: Writing a Pachinko game on iOS with Swift and SpriteKit</h1></header><div class="article-meta"><div class="article-date"><i class="fa fa-calendar"></i> <a href="/2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit/" class="article-date">Created <time datetime="2014-08-06T17:22:58.000Z" itemprop="datePublished">2014-08-06</time>,</a></div><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link-link" href="/tags/Swift/" rel="tag">Swift</a>, <a class="tag-link-link" href="/tags/iOS/" rel="tag">iOS</a></div></div><div class="article-entry" itemprop="articleBody"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#getting-start-with-xcode-6"><span class="toc-text">Getting start with XCode 6</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#type-inference"><span class="toc-text">Type Inference</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#handling-different-scene-aspect-ratio"><span class="toc-text">Handling different scene&nbsp;aspect ratio</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#build-basic-game-elements-with-spritekit"><span class="toc-text">Build basic game elements with SpriteKit</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#non-optionaloptional-variable"><span class="toc-text">Non-optional/Optional Variable?</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#handle-object-collision"><span class="toc-text">Handle object collision</span></a></li></ol><div style="text-align:center"><div class="github-card" data-user="neoalienson" data-repo="pachinko" data-height="200" data-width="400" data-theme="default" data-target="" data-client-id="" data-client-secret=""></div></div><p>Do you like Swift, the programming language that comes with XCode 6 from Apple? You may not know, but I developed a fondness for it after writing a game with it. I am going to show you how to write a game with Swift. If you’d like to jump right into the <a target="_blank" rel="noopener" href="https://github.com/neoalienson/pachinko">source code</a> of this game, you can download or clone it from <a target="_blank" rel="noopener" href="https://github.com/neoalienson/pachinko">GitHub</a></p><span id="more"></span><p><img src="/2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit/screenshot.png" alt="Pachinko, a.k.a. Japanese pinball game, in iOS with Swift"></p><h1 id="getting-start-with-xcode-6"><a class="markdownIt-Anchor" href="#getting-start-with-xcode-6"></a> Getting start with XCode 6</h1><p>Firstly, you need to download XCode 6. At the moment, XCode 6 is not official released, so you’ll need to join ‘iOS Developer Program’ to access it. Once you’ve installed Xcode and chosen to create a new project, you can select the iOS Application with Game template,</p><p><img src="/2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit/new_xcode_game.png" alt="new_xcode_game"></p><p>Fill in product name, choosing the language Swift and the framework SpriteKit,</p><p><img src="/2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit/new_xcode_game_2.png" alt="new_xcode_game_2"></p><h1 id="type-inference"><a class="markdownIt-Anchor" href="#type-inference"></a> Type Inference</h1><p>Once the canned game is created, you can set <code>scaleMode</code> in <code>GameViewController.swift</code> to <code>.AspectFit</code>, e.g., <code>scene.scaleMode = .AspectFit</code>. The canned version sets <code>scaleMode</code> to <code>.AspectFill</code>. I got lost with the coordinates when using <code>.AspectFill</code> and found that part of the game scene wasn’t being shown under this mode. I discovered that setting <code>scaleMode</code> to <code>.AspectFit</code> would be easier to learn the coordinate system because all of the scene is shown. Empty spaces are added with <code>.AspectFit</code> if they don’t match, so you won’t miss any part of your scene. You don’t need to specify the type for <code>.AspectFit</code>, as Swift can infer the type from <code>scene.scaleMode</code> using Type Inference. Additionally, the semicolon is not required to end a statement. Are you starting to love it?</p><h1 id="handling-different-scene-aspect-ratio"><a class="markdownIt-Anchor" href="#handling-different-scene-aspect-ratio"></a> Handling different scene&nbsp;aspect ratio</h1><p>Next, resize the <code>GameScene.sks</code> to 640 width and 1136 height such that it fits aspect ratio to iPhone 5. Note that the numbers aren’t in pixel units because the scene can be scaled according to <code>scaleMode</code>, using 640 is easier for reference purposes in the game program. It may be difficult to see the selected game scene on your first launch, as it will fits the editor by default; zooming out with the ‘-’ icon can help. You’ll know you’ve selected the scene from&nbsp;breadcrumb or property window on right.</p><p><img src="/2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit/gamesene_sks.png" alt="gamesene_sks"></p><h1 id="build-basic-game-elements-with-spritekit"><a class="markdownIt-Anchor" href="#build-basic-game-elements-with-spritekit"></a> Build basic game elements with SpriteKit</h1><p>SpriteKit is very familiar to me as I have experience with Cocos2d and Cocos2d-x. It is an all-in-one physics engine, 2d graphics engine, and animation engine. Let’s start by creating pins, fences and borders.</p><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SpriteKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GameScene</span>: <span class="title class_">SKScene</span> {</span><br><span class="line">  <span class="keyword">var</span> borderBottom: <span class="type">SKShapeNode</span>? <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">didMoveToView</span>(<span class="params">view</span>: <span class="type">SKView</span>) {</span><br><span class="line">    <span class="keyword">let</span> top <span class="operator">=</span> scene.size.height;</span><br><span class="line">    <span class="keyword">let</span> right <span class="operator">=</span> scene.size.width;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// pins</span></span><br><span class="line">    <span class="keyword">let</span> pinRadius : <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">5</span></span><br><span class="line">    <span class="keyword">let</span> pinSpacing : <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">100</span></span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">var</span> x : <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">75</span>; x <span class="operator">&amp;</span>lt; <span class="number">500</span>; x <span class="operator">+=</span> pinSpacing {</span><br><span class="line">      <span class="keyword">for</span> <span class="keyword">var</span> y : <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">200</span>; y <span class="operator">&amp;</span>lt; <span class="number">800</span>; y <span class="operator">+=</span> pinSpacing {</span><br><span class="line">        <span class="keyword">let</span> sprite <span class="operator">=</span> <span class="type">SKShapeNode</span>(circleOfRadius: pinRadius)</span><br><span class="line">        sprite.physicsBody <span class="operator">=</span> <span class="type">SKPhysicsBody</span>(circleOfRadius: pinRadius)</span><br><span class="line">        sprite.physicsBody.dynamic <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        <span class="comment">// straggered pins</span></span><br><span class="line">        sprite.position.x <span class="operator">=</span> x <span class="operator">+</span> (y <span class="operator">%</span> (pinSpacing <span class="operator">*</span> <span class="number">2</span>)) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line">        sprite.position.y <span class="operator">=</span> y</span><br><span class="line">        sprite.fillColor <span class="operator">=</span> <span class="type">UIColor</span>.whiteColor()</span><br><span class="line">        <span class="keyword">self</span>.addChild(sprite)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// fences</span></span><br><span class="line">    <span class="keyword">let</span> fenceSpacing : <span class="type">CGFloat</span> <span class="operator">=</span> <span class="number">100</span></span><br><span class="line">    <span class="keyword">let</span> fenceSize <span class="operator">=</span> <span class="type">CGSize</span>(width: <span class="number">5</span>, height: <span class="number">75</span>)</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">var</span> x : <span class="type">CGFloat</span> <span class="operator">=</span> fenceSpacing; x <span class="operator">&amp;</span>lt; right <span class="operator">-</span> <span class="number">100</span>; x <span class="operator">+=</span> fenceSpacing {</span><br><span class="line">      <span class="keyword">let</span> sprite <span class="operator">=</span> <span class="type">SKShapeNode</span>(rectOfSize: fenceSize)</span><br><span class="line">      sprite.physicsBody <span class="operator">=</span> <span class="type">SKPhysicsBody</span>(rectangleOfSize: fenceSize)</span><br><span class="line">      sprite.physicsBody.dynamic <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">      sprite.position <span class="operator">=</span> <span class="type">CGPoint</span>(x: x, y: fenceSize.height <span class="operator">/</span> <span class="number">2</span>)</span><br><span class="line">      sprite.fillColor <span class="operator">=</span> <span class="type">UIColor</span>.whiteColor()</span><br><span class="line">      <span class="keyword">self</span>.addChild(sprite)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// bottom</span></span><br><span class="line">    <span class="keyword">let</span> pathBottom <span class="operator">=</span> <span class="type">CGPathCreateMutable</span>()</span><br><span class="line">    <span class="type">CGPathMoveToPoint</span>(pathBottom, <span class="literal">nil</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="type">CGPathAddLineToPoint</span>(pathBottom, <span class="literal">nil</span>, right, <span class="number">0</span>)</span><br><span class="line">    borderBottom <span class="operator">=</span> <span class="type">SKShapeNode</span>(path: pathBottom)</span><br><span class="line">    borderBottom<span class="operator">?</span>.physicsBody <span class="operator">=</span> <span class="type">SKPhysicsBody</span>(edgeChainFromPath: pathBottom)</span><br><span class="line">    borderBottom<span class="operator">?</span>.physicsBody.dynamic <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">self</span>.addChild(borderBottom)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// other borders</span></span><br><span class="line">    <span class="keyword">let</span> path <span class="operator">=</span> <span class="type">CGPathCreateMutable</span>()</span><br><span class="line">    <span class="type">CGPathMoveToPoint</span>(path, <span class="literal">nil</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="type">CGPathAddLineToPoint</span>(path, <span class="literal">nil</span>, <span class="number">0</span>, top)</span><br><span class="line">    <span class="type">CGPathAddLineToPoint</span>(path, <span class="literal">nil</span>, right <span class="operator">-</span> <span class="number">150</span>, top)</span><br><span class="line">    <span class="type">CGPathAddLineToPoint</span>(path, <span class="literal">nil</span>, right <span class="operator">-</span> <span class="number">50</span>, top <span class="operator">-</span> <span class="number">50</span>)</span><br><span class="line">    <span class="type">CGPathAddLineToPoint</span>(path, <span class="literal">nil</span>, right, top <span class="operator">-</span> <span class="number">150</span>)</span><br><span class="line">    <span class="type">CGPathAddLineToPoint</span>(path, <span class="literal">nil</span>, right, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">let</span> borders <span class="operator">=</span> <span class="type">SKShapeNode</span>(path: path)</span><br><span class="line">    borders.physicsBody <span class="operator">=</span> <span class="type">SKPhysicsBody</span>(edgeChainFromPath: path)</span><br><span class="line">    borders.physicsBody.dynamic <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">self</span>.addChild(borders)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="non-optionaloptional-variable"><a class="markdownIt-Anchor" href="#non-optionaloptional-variable"></a> Non-optional/Optional Variable?</h1><p>You may wonder what <code>SKShapeNode?</code> is in <code>var borderBottom: SKShapeNode? = nil</code>. In Swift, variables are non-optional by default and cannot be set to <code>nil</code> (or null) without explicit declaration. To make a variable optional, you need to append a question mark (<code>?</code>) to the end of its type. This design makes Swift more <strong>fool-proof</strong> because many developers in other languages accidentally dereference variables, leading to null pointer exceptions or method calls on undefined objects. Having an optional annotation can be helpful, but it would clutter your code with unnecessary annotations. Well, we still don’t have a game to play yet! Now let’s try to add some action and make things more fun.</p><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">touchesBegan</span>(<span class="params">touches</span>: <span class="type">NSSet</span>, <span class="params">withEvent</span> <span class="params">event</span>: <span class="type">UIEvent</span>) {</span><br><span class="line">  <span class="comment">// launch a ball</span></span><br><span class="line">  <span class="keyword">let</span> sprite <span class="operator">=</span> <span class="type">SKSpriteNode</span>(imageNamed:<span class="string">"Spaceship"</span>)</span><br><span class="line"></span><br><span class="line">  sprite.xScale <span class="operator">=</span> <span class="number">0.15</span></span><br><span class="line">  sprite.yScale <span class="operator">=</span> <span class="number">0.15</span></span><br><span class="line"></span><br><span class="line">  sprite.position <span class="operator">=</span> <span class="type">CGPoint</span>(x: <span class="number">605</span>, y: <span class="number">40</span>)</span><br><span class="line"></span><br><span class="line">  sprite.physicsBody <span class="operator">=</span> <span class="type">SKPhysicsBody</span>(circleOfRadius: <span class="number">30</span>)</span><br><span class="line">  sprite.physicsBody.contactTestBitMask <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">self</span>.addChild(sprite)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// give some randomless</span></span><br><span class="line">  sprite.physicsBody.velocity.dy <span class="operator">=</span> <span class="number">3000</span> <span class="operator">+</span> <span class="type">CGFloat</span>(rand()) <span class="operator">*</span> <span class="number">300</span> <span class="operator">/</span> <span class="type">CGFloat</span>(<span class="type">RAND_MAX</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>The spaceships fill up the screen if you tap continuously. Let’s do something when the spaceship hits the floor,</p><h1 id="handle-object-collision"><a class="markdownIt-Anchor" href="#handle-object-collision"></a> Handle object collision</h1><p>First, make the <code>GameScence</code> conform to <code>SKPhysicsContactDelegate</code>, which means that it can now have a function to handle contacts between physics objects.</p><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">GameScene</span>: <span class="title class_">SKScene</span>, <span class="title class_">SKPhysicsContactDelegate</span> {</span><br><span class="line">    <span class="keyword">var</span> score <span class="operator">=</span> <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure><p>And below is the function to handle object&nbsp;contact,</p><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">didBeginContact</span>(<span class="params">contact</span>: <span class="type">SKPhysicsContact</span>!) {</span><br><span class="line">  <span class="keyword">if</span> contact.bodyA <span class="operator">==</span> borderBottom<span class="operator">?</span>.physicsBody {</span><br><span class="line">    <span class="keyword">let</span> body <span class="operator">=</span> contact.bodyB</span><br><span class="line"></span><br><span class="line">    <span class="comment">// disable futher collision</span></span><br><span class="line">    body.contactTestBitMask <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> node <span class="operator">=</span> body.node</span><br><span class="line"></span><br><span class="line">    <span class="comment">// fade out</span></span><br><span class="line">    node.runAction(<span class="type">SKAction</span>.sequence([</span><br><span class="line">        <span class="type">SKAction</span>.fadeAlphaTo(<span class="number">0</span>, duration: <span class="number">1</span>),</span><br><span class="line">        <span class="type">SKAction</span>.removeFromParent()]))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// update score</span></span><br><span class="line">    score <span class="operator">+=</span> <span class="number">10</span></span><br><span class="line">    <span class="keyword">let</span> label <span class="operator">=</span> <span class="keyword">self</span>.childNodeWithName(<span class="string">"score"</span>) <span class="keyword">as</span> <span class="type">SKLabelNode</span></span><br><span class="line">    label.text <span class="operator">=</span> <span class="type">String</span>(score)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// score float up from the ball</span></span><br><span class="line">    <span class="keyword">let</span> scoreUp <span class="operator">=</span> <span class="type">SKLabelNode</span>(text: <span class="string">"+10"</span>)</span><br><span class="line">    scoreUp.position <span class="operator">=</span> node.position</span><br><span class="line">    <span class="keyword">self</span>.addChild(scoreUp)</span><br><span class="line">    scoreUp.runAction(<span class="type">SKAction</span>.sequence([</span><br><span class="line">        <span class="type">SKAction</span>.moveBy(<span class="type">CGVector</span>(dx: <span class="number">0</span>, dy: <span class="number">50</span>), duration: <span class="number">1</span>),</span><br><span class="line">        <span class="type">SKAction</span>.removeFromParent()</span><br><span class="line">        ]))</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>You should set contact delegate to the <code>GameScene</code> since it conforms to the protocol,</p><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">didMoveToView</span>(<span class="params">view</span>: <span class="type">SKView</span>) {</span><br><span class="line">  <span class="comment">// setup collision delegate</span></span><br><span class="line">  <span class="keyword">self</span>.physicsWorld.contactDelegate <span class="operator">=</span> <span class="keyword">self</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>Cool! I hope you’re not addict to the game.&nbsp;<a target="_blank" rel="noopener" href="https://github.com/neoalienson/pachinko">Download/browe source in GitHub</a>. I wish that one day, Swift and SpriteKit would become cross-platform.</p></div><footer class="article-footer"><a data-url="http://01man.com/2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit/" data-id="clvj8ofzc000jper45my28fgr" class="article-share-link"><i class="fa fa-share"></i>Share</a><script>!function(t){t("body").on("click",(function(){t(".article-share-box.on").removeClass("on")})).on("click",".article-share-link",(function(e){e.stopPropagation();var a,o=t(this),r=o.attr("data-url"),i=encodeURIComponent(r),s="article-share-box-"+o.attr("data-id"),l=o.offset();if(t("#"+s).length){if((a=t("#"+s)).hasClass("on"))return void a.removeClass("on")}else{var n=['<div id="'+s+'" class="article-share-box">','<input class="article-share-input" value="'+r+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+i+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+i+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+i+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+i+'" class="article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");a=t(n),t("body").append(a)}t(".article-share-box.on").hide(),a.css({top:l.top+25,left:l.left}).addClass("on")})).on("click",".article-share-box",(function(t){t.stopPropagation()})).on("click",".article-share-box-input",(function(){t(this).select()})).on("click",".article-share-box-link",(function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}))}(jQuery)</script></footer></div><script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "Neo Alienson"
        },
        "headline": "Discover Swift: Writing a Pachinko game on iOS with Swift and SpriteKit",
        "image": "http://01man.com/2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit/screenshot.png",
        "keywords": "iOS Swift",
        "genre": "Development",
        "datePublished": "2014-08-06",
        "dateCreated": "2014-08-06",
        "dateModified": "2024-04-27",
        "url": "http://01man.com/2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit/",
        "description": "
  



Do you like Swift, the programming language that comes with XCode 6 from Apple? You may not know, but I developed a fondness for it after writing a game with it. I am going to show you how to write a game with Swift.  If you’d like to jump right into the source code of this game, you can download or clone it from GitHub",
        "wordCount": 1831
    }</script></article></div></section><aside id="sidebar"><a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a><div class="sidebar-top"><p>follow:</p><ul class="social-links"><li><a class="social-tooltip" title="stack-exchange" href="https://stackexchange.com/users/2122053/neo?tab=accounts" target="_blank" rel="noopener"><i class="icon fa fa-stack-exchange"></i></a></li><li><a class="social-tooltip" title="stack-overflow" href="https://stackoverflow.com/users/1885105/neo" target="_blank" rel="noopener"><i class="icon fa fa-stack-overflow"></i></a></li><li><a class="social-tooltip" title="bitbucket" href="https://bitbucket.org/neoalienson/" target="_blank" rel="noopener"><i class="icon fa fa-bitbucket"></i></a></li><li><a class="social-tooltip" title="github" href="https://github.com/neoalienson" target="_blank" rel="noopener"><i class="icon fa fa-github"></i></a></li><li><a class="social-tooltip" title="linkedin" href="/linkedin.com/in/disconnectedout" target="_blank" rel="noopener"><i class="icon fa fa-linkedin"></i></a></li></ul></div><nav id="article-nav"><a href="/2014/google-map-show-traffic-alerts-during-route-planning-in-hong-kong/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">newer</strong><p class="article-nav-title">Google Map shows traffic alert during route planning in Hong Kong</p><i class="icon fa fa-chevron-right" id="icon-chevron-right"></i> </a><a href="/2014/ios-8-time-lapsed-videos/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">older</strong><p class="article-nav-title">iOS 8 time-lapse videos</p><i class="icon fa fa-chevron-left" id="icon-chevron-left"></i></a></nav><div class="widgets-container"><div class="widget-wrap widget-list"><h3 class="widget-title">links</h3><div class="widget"><ul><li><a href="/pages/Free-IT-Exams-and-Certifcates-For-Real">Free IT Exams and Certs</a></li><li><a href="/pages/useful-information">Useful Information</a></li><li><a href="/pages/Hexo-Blogging-Cheatsheet">Hexo Blogging Cheatsheet</a></li><li><a href="/pages/Open-Data-from-Hong-Kong">Open Data from Hong Kong</a></li><li><a href="/pages/Home-Assistant-REST-sensor-list">Home Assistant REST sensor list</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">recents</h3><div class="widget"><ul id="recent-post"><li><div class="item-thumbnail"><a href="/2024/Manage_Your_Own_Cloud_VPN_A_Penny-Pinchers_Guide_to_Online_Anonymity/" class="thumbnail"><span style="background-image:url(/2024/Manage_Your_Own_Cloud_VPN_A_Penny-Pinchers_Guide_to_Online_Anonymity/thumbnail.png)" alt="Manage Your Own Cloud VPN A Penny-Pincher's Guide to Online Anonymity" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p><p class="item-title"><a href="/2024/Manage_Your_Own_Cloud_VPN_A_Penny-Pinchers_Guide_to_Online_Anonymity/" class="title">Manage Your Own Cloud VPN A Penny-Pincher's Guide to Online Anonymity</a></p><p class="item-date"><time datetime="2024-01-12T00:00:00.000Z" itemprop="datePublished">2024-01-12</time></p></div></li><li><div class="item-thumbnail"><a href="/2023/Passkeys_Your_Gateway_to_Seamless_Security/" class="thumbnail"><span style="background-image:url(/2023/Passkeys_Your_Gateway_to_Seamless_Security/thumbnail.png)" alt="Passkeys - Your Gateway to Seamless Security" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tech/">Tech</a></p><p class="item-title"><a href="/2023/Passkeys_Your_Gateway_to_Seamless_Security/" class="title">Passkeys - Your Gateway to Seamless Security</a></p><p class="item-date"><time datetime="2023-12-15T00:00:00.000Z" itemprop="datePublished">2023-12-15</time></p></div></li><li><div class="item-thumbnail"><a href="/2023/Everything_as_Code_a_Trend_or_Necessity/" class="thumbnail"><span style="background-image:url(/2023/Everything_as_Code_a_Trend_or_Necessity/index.jpeg)" alt="Everything as Code - A Trend or a Necessity?" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p><p class="item-title"><a href="/2023/Everything_as_Code_a_Trend_or_Necessity/" class="title">Everything as Code - A Trend or a Necessity?</a></p><p class="item-date"><time datetime="2023-10-28T00:00:00.000Z" itemprop="datePublished">2023-10-28</time></p></div></li><li><div class="item-thumbnail"><a href="/2023/Troulbeshooting_Terraform/" class="thumbnail"><span style="background-image:url(/2023/Troulbeshooting_Terraform/log.png)" alt="Troubleshooting Terraform" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p><p class="item-title"><a href="/2023/Troulbeshooting_Terraform/" class="title">Troubleshooting Terraform</a></p><p class="item-date"><time datetime="2023-09-27T00:00:00.000Z" itemprop="datePublished">2023-09-27</time></p></div></li><li><div class="item-thumbnail"><a href="/2023/GitOps_on_Jenkins/" class="thumbnail"><span style="background-image:url(/2023/GitOps_on_Jenkins/hero.png)" alt="GitOps on Jenkins Pipelines" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Development/">Development</a></p><p class="item-title"><a href="/2023/GitOps_on_Jenkins/" class="title">GitOps on Jenkins Pipelines</a></p><p class="item-date"><time datetime="2023-09-25T02:38:00.000Z" itemprop="datePublished">2023-09-25</time></p></div></li></ul></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">archives</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">January 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">October 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">September 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget-wrap widget-float"><h3 class="widget-title">tag cloud</h3><div class="widget tagcloud"><a href="/tags/3D-printing/" style="font-size:10px">3D printing</a> <a href="/tags/AI/" style="font-size:16.67px">AI</a> <a href="/tags/Android/" style="font-size:13.33px">Android</a> <a href="/tags/Apple/" style="font-size:13.33px">Apple</a> <a href="/tags/Assembly/" style="font-size:10px">Assembly</a> <a href="/tags/C/" style="font-size:10px">C#</a> <a href="/tags/Cybersecurity/" style="font-size:10px">Cybersecurity</a> <a href="/tags/GitOps/" style="font-size:10px">GitOps</a> <a href="/tags/Go/" style="font-size:10px">Go</a> <a href="/tags/Google/" style="font-size:13.33px">Google</a> <a href="/tags/Groovy/" style="font-size:10px">Groovy</a> <a href="/tags/Hacking/" style="font-size:10px">Hacking</a> <a href="/tags/Java/" style="font-size:13.33px">Java</a> <a href="/tags/Jenkins/" style="font-size:10px">Jenkins</a> <a href="/tags/Mac/" style="font-size:13.33px">Mac</a> <a href="/tags/MacOS/" style="font-size:10px">MacOS</a> <a href="/tags/Minecraft/" style="font-size:10px">Minecraft</a> <a href="/tags/PHP/" style="font-size:10px">PHP</a> <a href="/tags/Pyhthon/" style="font-size:10px">Pyhthon</a> <a href="/tags/ShellScript/" style="font-size:10px">ShellScript</a> <a href="/tags/Swift/" style="font-size:16.67px">Swift</a> <a href="/tags/Test-Automation/" style="font-size:10px">Test Automation</a> <a href="/tags/Visualization/" style="font-size:10px">Visualization</a> <a href="/tags/arm/" style="font-size:13.33px">arm</a> <a href="/tags/cloud/" style="font-size:10px">cloud</a> <a href="/tags/enterprise/" style="font-size:10px">enterprise</a> <a href="/tags/hackathon/" style="font-size:13.33px">hackathon</a> <a href="/tags/iOS/" style="font-size:20px">iOS</a> <a href="/tags/jasmine/" style="font-size:10px">jasmine</a> <a href="/tags/javascript/" style="font-size:10px">javascript</a> <a href="/tags/nodejs/" style="font-size:13.33px">nodejs</a> <a href="/tags/python/" style="font-size:10px">python</a> <a href="/tags/terraform/" style="font-size:16.67px">terraform</a> <a href="/tags/wdcloud/" style="font-size:13.33px">wdcloud</a> <a href="/tags/wifi/" style="font-size:10px">wifi</a></div></div></div></aside></div></div></div><footer id="footer"><div class="container"><div class="container-inner"><a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a><div class="credit"><h1 class="logo-wrap"><a href="/" class="logo"></a></h1><p>© 2024 Neo Alienson <a href="/terms-and-conditions">Terms and Condition</a></p></div><div class="footer-plugins"></div></div></div></footer><script>var disqus_shortname="[object Object]",disqus_url="http://01man.com/2014/discover-swift-writing-a-pachinko-game-on-ios-with-swift-and-spritekit/";!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+disqus_shortname+".disqus.com/count.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}()</script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML.js"></script></div><script type="text/javascript" src="/js/bundle.js"></script></body></html>